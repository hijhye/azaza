<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ÏïÑÏûêÏûê ÎåÄÏãúÎ≥¥Îìú</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
        <link
            href="https://cdn.jsdelivr.net/gh/sun-typeface/SUIT@2/fonts/variable/woff2/SUIT-Variable.css"
            rel="stylesheet"
        />

        <style>
            @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

            :root {
                --bg-day: linear-gradient(135deg, #aee1f9 0%, #f0f9ff 100%);
                --card-bg: rgba(255, 255, 255, 0.85);
                --primary: #0077c2;
                --blue: #4fc3f7;
                --text: #2c3e50;
                --text-sub: #78909c;
            }
            body {
                font-family: 'SUIT Variable', sans-serif;
                background: var(--bg-day);
                background-attachment: fixed;
                min-height: 100vh;
                margin: 0;
                padding: 20px;
                display: flex;
                flex-direction: column;
                align-items: center;
                color: var(--text);
                padding-bottom: 160px;
                transition: background 0.5s ease;
                user-select: none;
            }
            .container {
                width: 100%;
                max-width: 550px;
            }

            .header-bar {
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: rgba(255, 255, 255, 0.3);
                backdrop-filter: blur(10px);
                padding: 15px 20px;
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.5);
                margin-bottom: 25px;
                color: var(--primary);
            }
            .header-left {
                display: flex;
                align-items: baseline;
                gap: 12px;
            }
            .d-day {
                font-size: 2.2rem;
                font-weight: 900;
                color: var(--primary);
                text-shadow: 0 2px 5px rgba(0, 119, 194, 0.2);
            }
            .today-date {
                font-size: 1.1rem;
                font-weight: 500;
                opacity: 0.9;
                color: var(--text);
            }

            .tab-menu {
                display: flex;
                gap: 8px;
            }
            .tab-btn {
                background: rgba(255, 255, 255, 0.4);
                border: 1px solid rgba(255, 255, 255, 0.6);
                color: var(--primary);
                padding: 8px 16px;
                border-radius: 12px;
                cursor: pointer;
                font-size: 0.9rem;
                transition: 0.3s;
            }
            .tab-btn.active {
                background: white;
                color: var(--blue);
                font-weight: bold;
                border-color: white;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            }

            .card {
                background: var(--card-bg);
                border-radius: 24px;
                padding: 25px;
                box-shadow: 0 15px 35px rgba(0, 119, 194, 0.1);
                position: relative;
                backdrop-filter: blur(10px);
            }
            .section-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }
            .section-title-main {
                font-size: 1.3rem;
                font-weight: 800;
                color: var(--primary);
            }
            .btn-edit-global {
                background: #e1f5fe;
                border: none;
                padding: 8px 14px;
                border-radius: 10px;
                font-size: 0.8rem;
                color: var(--blue);
                cursor: pointer;
                font-weight: 700;
                transition: 0.2s;
            }

            /* Ìï† Ïùº Î¶¨Ïä§Ìä∏ ÎìúÎûòÍ∑∏ Ìï∏Îì§ Ìö®Í≥º */
            .task-item {
                display: flex;
                align-items: flex-start;
                gap: 15px;
                margin-bottom: 12px;
                padding: 15px;
                background: #fff;
                border-radius: 16px;
                border: 1px solid #e1f5fe;
                cursor: grab;
                transition: transform 0.2s, box-shadow 0.2s;
                touch-action: none; /* Î™®Î∞îÏùº ÎìúÎûòÍ∑∏ ÏõêÌôúÌïòÍ≤å */
            }
            .task-item:active {
                cursor: grabbing;
                box-shadow: 0 5px 15px rgba(0, 119, 194, 0.1);
            }
            .sortable-ghost {
                opacity: 0.4;
                background: #e1f5fe !important;
                border: 2px dashed var(--blue) !important;
            }

            input[type='checkbox'] {
                width: 24px;
                height: 24px;
                cursor: pointer;
                accent-color: var(--blue);
                margin-top: 2px;
            }
            .task-info.done .content {
                text-decoration: line-through;
                color: var(--text-sub);
            }
            .label {
                font-size: 0.8rem;
                color: var(--text-sub);
                font-weight: 700;
                margin-bottom: 4px;
                display: block;
            }
            .content {
                font-size: 1.05rem;
                font-weight: 600;
                line-height: 1.5;
                color: var(--text);
                pointer-events: none;
            }

            .progress-section {
                margin-top: 25px;
                padding-top: 20px;
                border-top: 2px dashed #e1f5fe;
            }
            .progress-container {
                background: #e1f5fe;
                border-radius: 10px;
                height: 12px;
                overflow: hidden;
            }
            .progress-bar {
                background: var(--blue);
                height: 100%;
                width: 0%;
                transition: width 0.6s ease;
            }
            .progress-text {
                font-size: 0.85rem;
                color: var(--blue);
                text-align: right;
                margin-top: 8px;
                font-weight: 800;
            }

            .view-section {
                display: none;
            }
            .view-section.active {
                display: block;
            }
            .list-item {
                display: flex;
                padding: 18px 10px;
                border-bottom: 1px solid #e1f5fe;
                cursor: pointer;
            }

            .bottom-clock-area {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                background: rgba(255, 255, 255, 0.5);
                backdrop-filter: blur(20px);
                padding: 25px 0;
                text-align: center;
                color: var(--primary);
                border-top: 1px solid rgba(255, 255, 255, 0.5);
                z-index: 1000;
            }
            .big-clock {
                font-size: 5rem;
                font-weight: 900;
                letter-spacing: -4px;
                line-height: 1;
                font-variant-numeric: tabular-nums;
            }

            #modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 119, 194, 0.2);
                z-index: 2000;
                justify-content: center;
                align-items: center;
                backdrop-filter: blur(5px);
            }
            .modal-content {
                background: white;
                padding: 30px;
                border-radius: 24px;
                width: 90%;
                max-width: 400px;
            }
            input,
            textarea {
                width: 100%;
                padding: 14px;
                margin-bottom: 12px;
                border: 1px solid #b3e5fc;
                border-radius: 12px;
                box-sizing: border-box;
                font-family: inherit;
                color: var(--text);
            }
            .btn-save {
                width: 100%;
                background: var(--blue);
                color: white;
                border: none;
                padding: 16px;
                border-radius: 12px;
                cursor: pointer;
                font-size: 1.1rem;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header-bar">
                <div class="header-left">
                    <div class="d-day" id="d-day-display">D-Day</div>
                    <div class="today-date" id="header-date">
                        ÎÇ†Ïßú Î°úÎî©Ï§ë...
                    </div>
                </div>
                <div class="tab-menu">
                    <button
                        class="tab-btn active"
                        id="tab-today"
                        onclick="switchView('today')"
                    >
                        Ïò§Îäò
                    </button>
                    <button
                        class="tab-btn"
                        id="tab-all"
                        onclick="switchView('all')"
                    >
                        Ï†ÑÏ≤¥
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="section-header">
                    <div class="section-title-main" id="view-title">
                        Today's Focus
                    </div>
                    <button
                        class="btn-edit-global"
                        id="btn-edit-main"
                        onclick="openEditToday()"
                    >
                        Ï†ÑÏ≤¥ ÏàòÏ†ï
                    </button>
                </div>

                <div id="view-today" class="view-section active">
                    <div id="today-tasks-container"></div>
                    <div class="progress-section">
                        <div class="progress-container">
                            <div id="progress-bar" class="progress-bar"></div>
                        </div>
                        <div id="progress-text" class="progress-text">
                            ÏßÑÌñâÎ•† 0%
                        </div>
                    </div>
                </div>

                <div id="view-all" class="view-section">
                    <div
                        id="full-list-container"
                        style="max-height: 55vh; overflow-y: auto"
                    ></div>
                </div>
            </div>
        </div>

        <div class="bottom-clock-area">
            <div id="big-clock" class="big-clock">00:00:00</div>
        </div>

        <div id="modal">
            <div class="modal-content">
                <h3 style="margin-top: 0; color: var(--primary)">
                    ÏùºÏ†ï Îç∞Ïù¥ÌÑ∞ ÏàòÏ†ï
                </h3>
                <input
                    type="text"
                    id="in-date"
                    placeholder="ÎÇ†Ïßú (MM-DD)"
                    readonly
                />
                <input type="text" id="in-general" placeholder="üèÉ ÏùºÎ∞ò ÏùºÏ†ï" />
                <input
                    type="text"
                    id="in-exam-cat"
                    placeholder="üìö ÏãúÌóò Î∂ÑÎ•ò"
                />
                <textarea
                    id="in-exam-note"
                    placeholder="üìö Í≥µÎ∂Ä ÎÇ¥Ïö©"
                    rows="2"
                ></textarea>
                <input
                    type="text"
                    id="in-job-note"
                    placeholder="üíº Ï∑®ÏóÖ Ï§ÄÎπÑ"
                />
                <input type="text" id="in-side" placeholder="üí∞ Î∂ÄÏàòÏûÖ" />
                <button class="btn-save" onclick="saveData()">Ï†ÄÏû•ÌïòÍ∏∞</button>
                <button
                    onclick="closeModal()"
                    style="
                        width: 100%;
                        background: none;
                        border: none;
                        margin-top: 15px;
                        color: var(--text-sub);
                        cursor: pointer;
                    "
                >
                    Ï∑®ÏÜå
                </button>
            </div>
        </div>

        <script>
            const EXAM_DATE = new Date('2026-02-08');

            // 1Ïõî 13ÏùºÎ∂ÄÌÑ∞ 2Ïõî 8ÏùºÍπåÏßÄÏùò Î™®Îì† Îç∞Ïù¥ÌÑ∞ Î≥µÍµ¨
            const INITIAL_DATA = [
                {
                    date: '01-13',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (ÌïµÏã¨ÏöîÏïΩ)',
                            content: '1ÌöåÎèÖ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'ÌåÄÌîå ÏôÑÏÑ±ÌïòÍ∏∞',
                        },
                        {
                            id: 'side',
                            label: 'üí∞ Î∂ÄÏàòÏûÖ ÏûëÏóÖ',
                            content: 'ÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ ÎßåÎì§Í∏∞',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-14',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (ÌïµÏã¨ÏöîÏïΩ)',
                            content: '2ÌöåÎèÖ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ ÌîÑÎ°úÏ†ùÌä∏ Î∞òÏùëÌòï',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-15',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (ÌïµÏã¨ÏöîÏïΩ)',
                            content: '3ÌöåÎèÖ + Ï†ïÎ¶¨',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ ÌîÑÎ°úÏ†ùÌä∏ Î∞òÏùëÌòï',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-16',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (ÌïµÏã¨ÏöîÏïΩ)',
                            content: '3ÌöåÎèÖ + Ï†ïÎ¶¨',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'ÏûêÏÜåÏÑú 1Ï∞® ÏûëÏÑ±',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ, Íµ≠Ï∑®ÏÉÅÎã¥',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-17',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (ÌïµÏã¨ÏöîÏïΩ)',
                            content: '3ÌöåÎèÖ + Ï†ïÎ¶¨',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Ï†êÍ≤ÄÌïòÍ∏∞',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏïåÎ∞î',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-18',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Î≥µÏäµ)',
                            content: 'ÌïµÏã¨ÏöîÏïΩ ÎÖ∏Ìä∏',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Ï†êÍ≤ÄÌïòÍ∏∞',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏïåÎ∞î, ÍµêÌöå',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-19',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '1Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Ìè¨Ìè¥ ÏÇ¨Ïù¥Ìä∏ ÏôÑÏÑ±',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-20',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '2Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Ìè¨Ìè¥ ÏÇ¨Ïù¥Ìä∏ ÏôÑÏÑ±',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-21',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '3Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Ìè¨Ìè¥ Í∏∞ÌöçÏÑú ÏûëÏÑ±',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-22',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '4Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Î¶¨Ïï°Ìä∏ ÏÇ¨Ïù¥Ìä∏ Ï†ïÎ¶¨',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-23',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '5Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Î¶¨Ïï°Ìä∏ ÏÇ¨Ïù¥Ìä∏ Ï†ïÎ¶¨',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-24',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '6Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'ÏûêÏÜåÏÑú 2Ï∞® ÏàòÏ†ï',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏïåÎ∞î',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-25',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Î≥µÏäµ)',
                            content: 'ÏöîÏïΩÎÖ∏Ìä∏ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'Ï†êÍ≤ÄÌïòÍ∏∞',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏïåÎ∞î, ÍµêÌöå',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-26',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '7Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'job',
                            label: 'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                            content: 'ÏûÖÏÇ¨ÏßÄÏõêÌïòÍ∏∞',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-27',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '8Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-28',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '9Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-29',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '10Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-30',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '11Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏàòÏòÅ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '01-31',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '12Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÏïåÎ∞î',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-01',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Î≥µÏäµ)',
                            content: 'ÏöîÏïΩÎÖ∏Ìä∏ + Ïò§Îãµ',
                        },
                        {
                            id: 'general',
                            label: 'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                            content: 'ÍµêÌöå',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-02',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '13Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-03',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '14Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-04',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Í∏∞Ï∂úÎ¨∏Ï†ú)',
                            content: '15Ìöå ÌíÄÏù¥ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-05',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Î≥µÏäµ)',
                            content: 'ÏöîÏïΩÎÖ∏Ìä∏ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-06',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Î≥µÏäµ)',
                            content: 'ÏöîÏïΩÎÖ∏Ìä∏ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-07',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö Ï†ïÏ≤òÍ∏∞ (Î≥µÏäµ)',
                            content: 'ÏöîÏïΩÎÖ∏Ìä∏ + Ïò§Îãµ',
                        },
                    ],
                    done: [],
                },
                {
                    date: '02-08',
                    tasks: [
                        {
                            id: 'exam',
                            label: 'üìö ÏãúÌóòÎãπÏùº',
                            content: 'Ìï©Í≤© Í∞ÄÏ¶àÏïÑ!',
                        },
                    ],
                    done: [],
                },
            ];

            let schedules =
                JSON.parse(localStorage.getItem('mySchedules')) || INITIAL_DATA;

            function updateClock() {
                const now = new Date();
                document.getElementById('big-clock').innerText = now
                    .toTimeString()
                    .split(' ')[0];
            }
            setInterval(updateClock, 1000);
            updateClock();

            function switchView(view) {
                document
                    .querySelectorAll('.view-section')
                    .forEach((el) => el.classList.remove('active'));
                document
                    .querySelectorAll('.tab-btn')
                    .forEach((el) => el.classList.remove('active'));
                if (view === 'today') {
                    document
                        .getElementById('view-today')
                        .classList.add('active');
                    document
                        .getElementById('tab-today')
                        .classList.add('active');
                    document.getElementById('view-title').innerText =
                        "Today's Focus";
                    document.getElementById('btn-edit-main').style.display =
                        'block';
                    renderToday();
                } else {
                    document.getElementById('view-all').classList.add('active');
                    document.getElementById('tab-all').classList.add('active');
                    document.getElementById('view-title').innerText =
                        'Full Schedule';
                    document.getElementById('btn-edit-main').style.display =
                        'none';
                    renderAll();
                }
            }

            function renderToday() {
                const now = new Date();
                const todayStr = `${String(now.getMonth() + 1).padStart(
                    2,
                    '0'
                )}-${String(now.getDate()).padStart(2, '0')}`;
                const data = schedules.find((s) => s.date === todayStr);

                const diff =
                    EXAM_DATE -
                    new Date(now.getFullYear(), now.getMonth(), now.getDate());
                document.getElementById(
                    'd-day-display'
                ).innerText = `D-${Math.ceil(diff / (1000 * 60 * 60 * 24))}`;
                document.getElementById(
                    'header-date'
                ).innerText = `${todayStr.replace('-', '.')} ${
                    ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'][now.getDay()]
                }`;

                const container = document.getElementById(
                    'today-tasks-container'
                );
                if (!data || !data.tasks.length) {
                    container.innerHTML = `<p style="text-align:center; padding:40px; color:var(--text-sub);">Ïò§ÎäòÏùÄ ÏùºÏ†ïÏù¥ ÏóÜÏäµÎãàÎã§.</p>`;
                    updateProgress(0, 0);
                    return;
                }

                container.innerHTML = data.tasks
                    .map(
                        (t) => `
        <div class="task-item" data-id="${t.id}">
            <input type="checkbox" ${
                data.done.includes(t.id) ? 'checked' : ''
            } onchange="toggleTask('${todayStr}', '${t.id}')">
            <div class="task-info ${data.done.includes(t.id) ? 'done' : ''}">
                <span class="label">${t.label}</span>
                <div class="content">${t.content}</div>
            </div>
        </div>
    `
                    )
                    .join('');

                updateProgress(data.done.length, data.tasks.length);
                initSortable(todayStr);
            }

            function initSortable(todayStr) {
                const el = document.getElementById('today-tasks-container');
                Sortable.create(el, {
                    animation: 200,
                    ghostClass: 'sortable-ghost',
                    onEnd: function () {
                        const data = schedules.find((s) => s.date === todayStr);
                        const newOrderIds = [
                            ...el.querySelectorAll('.task-item'),
                        ].map((item) => item.dataset.id);

                        // Îç∞Ïù¥ÌÑ∞ ÏàúÏÑú Ïû¨Î∞∞Ïπò
                        const reorderedTasks = newOrderIds.map((id) =>
                            data.tasks.find((t) => t.id === id)
                        );
                        data.tasks = reorderedTasks;

                        localStorage.setItem(
                            'mySchedules',
                            JSON.stringify(schedules)
                        );
                    },
                });
            }

            function toggleTask(date, taskId) {
                const data = schedules.find((s) => s.date === date);
                if (data.done.includes(taskId))
                    data.done = data.done.filter((id) => id !== taskId);
                else data.done.push(taskId);
                localStorage.setItem('mySchedules', JSON.stringify(schedules));
                renderToday();
            }

            function updateProgress(done, total) {
                const percent =
                    total === 0 ? 0 : Math.round((done / total) * 100);
                document.getElementById('progress-bar').style.width =
                    percent + '%';
                document.getElementById(
                    'progress-text'
                ).innerText = `ÏßÑÌñâÎ•† ${percent}%`;
            }

            function renderAll() {
                const container = document.getElementById(
                    'full-list-container'
                );
                schedules.sort((a, b) => a.date.localeCompare(b.date));
                container.innerHTML = schedules
                    .map(
                        (s) => `
        <div class="list-item" onclick="openModal('${s.date}')">
            <div style="width:60px; font-weight:800; color:var(--primary); font-size:0.9rem;">${
                s.date
            }</div>
            <div style="flex:1;">
                <div style="font-weight:700; color:var(--text); font-size:1.05rem;">
                    ${s.tasks.map((t) => `<div>${t.content}</div>`).join('')}
                </div>
            </div>
            <div style="color:#b3e5fc; align-self:center;">‚ùØ</div>
        </div>
    `
                    )
                    .join('');
            }

            function openEditToday() {
                const now = new Date();
                const todayStr = `${String(now.getMonth() + 1).padStart(
                    2,
                    '0'
                )}-${String(now.getDate()).padStart(2, '0')}`;
                openModal(todayStr);
            }

            function openModal(date) {
                const target = schedules.find((s) => s.date === date);
                document.getElementById('in-date').value = date;

                // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ ÌèºÏóê Ï±ÑÏö∞Í∏∞
                const getTask = (id) =>
                    target.tasks.find((t) => t.id === id)?.content || '';
                document.getElementById('in-general').value =
                    getTask('general');
                document.getElementById('in-exam-cat').value =
                    target.tasks
                        .find((t) => t.id === 'exam')
                        ?.label.split('(')[1]
                        ?.replace(')', '') || '';
                document.getElementById('in-exam-note').value = getTask('exam');
                document.getElementById('in-job-note').value = getTask('job');
                document.getElementById('in-side').value = getTask('side');

                document.getElementById('modal').style.display = 'flex';
            }

            function closeModal() {
                document.getElementById('modal').style.display = 'none';
            }

            function saveData() {
                const date = document.getElementById('in-date').value;
                const target = schedules.find((s) => s.date === date);

                const newTasks = [];
                const add = (id, label, content) => {
                    if (content) newTasks.push({ id, label, content });
                };

                add(
                    'exam',
                    `üìö Ï†ïÏ≤òÍ∏∞ (${
                        document.getElementById('in-exam-cat').value
                    })`,
                    document.getElementById('in-exam-note').value
                );
                add(
                    'job',
                    'üíº Ï∑®ÏóÖ Ï§ÄÎπÑ',
                    document.getElementById('in-job-note').value
                );
                add(
                    'general',
                    'üèÉ ÏùºÎ∞ò ÏùºÏ†ï',
                    document.getElementById('in-general').value
                );
                add(
                    'side',
                    'üí∞ Î∂ÄÏàòÏûÖ ÏûëÏóÖ',
                    document.getElementById('in-side').value
                );

                target.tasks = newTasks;
                localStorage.setItem('mySchedules', JSON.stringify(schedules));
                closeModal();
                renderToday();
                renderAll();
            }

            renderToday();
        </script>
    </body>
</html>
